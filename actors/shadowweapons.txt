ACTOR ShadowAbilities : Weapon
{
  Weapon.SelectionOrder 3700
  Weapon.Kickback 9999999999999
  Weapon.BobRangeX 0.0
  Weapon.BobRangeY 0.0
  Weapon.AmmoType "ChaosEnergy"
  Tag "Shadow the Hedgehog"
  +WEAPON.MELEEWEAPON
  +WEAPON.NOAUTOFIRE
  States
  {
  Ready:
    TNT1 A 1 A_WeaponReady
    Loop
  Deselect:
    TNT1 AA 0 A_Lower
	Goto Select
  Select:
	TNT1 A 1 A_Lower
	Goto Deselect
  Fire:
    TNT1 A 0 A_JumpIf(CountInv("PowerSuper") > 0, "SuperKick")
    TNT1 A 0 A_PlaySound("sonicdoom/swordswing",1)
    DKIK ABC 1
    DKIK D 1 A_CustomPunch(random(1,16)*10, true, CPF_NOTURN, "NoGibPuff", 75, 0, 0, "ArmorBonus", "sonicdoom/finalhit")
    DKIK EF 1
	TNT1 A 2 A_ReFire
    Goto Ready
  SuperKick:
    TNT1 A 0 A_PlaySound("sonicdoom/swordswing",1)
    SDKI BC 1
	SDKI D 1 A_CustomPunch(random(1,16)*100, true, CPF_NOTURN, "GibPuff", 75, 0, 0, "ArmorBonus", "sonicdoom/finalhit")
    SDKI EF 1
	TNT1 A 2
    Goto Ready
  AltFire:
    TNT1 A 0 A_JumpIf(CountInv("ChaosEnergy") < 2, "NoEnergy")
    SARM ABC 1
    SARM D 12
	{
	  if (CountInv("PowerSuper")) {
        A_FireProjectile("SuperChaosEnergyBall");
	  }
	  else {
	    A_FireProjectile("ChaosSpear");
		A_TakeInventory("ChaosEnergy", 2);
	  }
	}
	SARM D 0 A_ReFire
    SARM CBA 1
	Goto Ready
  AltHold:
    TNT1 A 0 A_JumpIf(CountInv("ChaosEnergy") < 2, "NoEnergy2")
    SARM D 12
	{
	  if (CountInv("PowerSuper")) {
        A_FireProjectile("SuperChaosEnergyBall");
	  }
	  else {
	    A_FireProjectile("ChaosSpear");
		A_TakeInventory("ChaosEnergy", 2);
	  }
	}
	SARM A 0 A_ReFire
	Goto AltFire
  NoEnergy:
    TNT1 A 0 A_Print("\c[ShadowRedBlack]I don't have enough Chaos Energy!")
	TNT1 A 0 A_PlaySound("sonicdoom/shadowerror", 4096)
	Goto Ready
  NoEnergy2:
    SARM CBA 1
    TNT1 A 0 A_Print("\c[ShadowRedBlack]I don't have enough Chaos Energy!")
	TNT1 A 0 A_PlaySound("sonicdoom/shadowerror", 4096)
	Goto Ready
  Spawn:
    SHAD A -1
    Stop
  }
}

ACTOR ChaosEmeraldGreen : Weapon
{
  Weapon.SelectionOrder 3700
  Weapon.AmmoType "ChaosEnergy"
  Weapon.AmmoUse 25
  Weapon.AmmoGive 100
  Inventory.PickupSound "sonicdoom/pickup"
  Inventory.PickupMessage "Got the green Chaos Emerald."
  Tag "Green Emerald"
  +AMMO_OPTIONAL
  States
  {
  Ready:
    CGAM A 1 A_WeaponReady
    Loop
  Deselect:
    CGAM AA 0 A_Lower
	Goto Select
  Select:
	CGAM A 1 A_Lower
	Goto Deselect
  Fire:
    TNT1 A 0 A_JumpIf(CountInv("ChaosEnergy") > 0, "RingCheck")
    TNT1 A 0 A_JumpIf(CountInv("ChaosEnergy") < 1, "NoEnergy")
  RingCheck:
    TNT1 A 0 A_JumpIf(Health > 998, "RingsFull")
    TNT1 A 0 A_JumpIf(Health < 999, "ChaosHeal")
  NoEnergy:
    TNT1 A 0 A_Print("\c[ShadowRedBlack]My energy is depleted!")
	TNT1 A 0 A_PlaySound("sonicdoom/shadowerror", 4096)
	Goto Ready
  RingsFull:
    TNT1 A 0 A_Print("\c[ShadowRedBlack]I'm already at full Rings!")
	TNT1 A 0 A_PlaySound("sonicdoom/shadowerror", 4096)
	Goto Ready
  ChaosHeal:
    CGAM B 0 A_PlaySound("sonicdoom/healthcharge", 4096)
    CGAM B 0 A_TakeInventory("ChaosEnergy", 1)
    CGAM B 1 A_GiveInventory("Health", 16)
	Goto Ready
  Spawn:
    CHSM G -1
    Stop
  }
}

ACTOR ShadowEclipseBlaster : Weapon
{
  Weapon.SelectionOrder 1400
  Weapon.AmmoType1 "ChaosEnergy"
  Weapon.AmmoType2 "ChaosEnergy"
  Weapon.AmmoUse 5
  Weapon.AmmoGive 30
  Weapon.KickBack 100000000
  Weapon.BobRangeX 0.0
  Weapon.BobRangeY 1.0
  Weapon.BobSpeed 1.0
  +EXTREMEDEATH
  Inventory.PickupMessage "\c[ShadowRedBlack]...THIS is the ultimate in plasma weaponry."
  Tag "Eclipse Blaster Mk. VI"
  States
  {
  Ready:
    ECBL A 1 A_WeaponReady
    Loop
  Deselect:
    TNT1 AA 0 A_Lower
	ECBL A 1 A_Lower
	Goto Select+1
  Select:
    TNT1 AA 0 A_Lower
	ECBL A 1 A_Lower
	Goto Deselect+1
  Fire:
	ECBL B 1
	{
	  if (CountInv("PowerSuper")) {
        A_FireProjectile("ChaosEnergyBall", 0, 0, -8, -8);
        A_FireProjectile("SilentChaosEnergyBall", 0, 0, 8, 6);
        A_FireProjectile("SilentChaosEnergyBall", 0, 0, -8, 6);
        A_FireProjectile("SilentChaosEnergyBall", 0, 0, 8, -8);
	  }
	  else {
        A_FireProjectile("ChaosEnergyBall", 0, 1, -8, -8);
        A_FireProjectile("SilentChaosEnergyBall", 0, 1, 8, 6);
        A_FireProjectile("SilentChaosEnergyBall", 0, 1, -8, 6);
        A_FireProjectile("SilentChaosEnergyBall", 0, 1, 8, -8);
	  }
	}
    Goto Ready
  AltFire:
    TNT1 A 0 A_JumpIf(CountInv("ChaosEnergy") > 0, "RingCheck")
    TNT1 A 0 A_JumpIf(CountInv("ChaosEnergy") < 1, "NoEnergy")
  RingCheck:
    TNT1 A 0 A_JumpIf(Health > 998, "RingsFull")
    TNT1 A 0 A_JumpIf(Health < 999, "ChaosHeal")
  NoEnergy:
    TNT1 A 0 A_Print("\c[ShadowRedBlack]My energy is depleted!")
	TNT1 A 0 A_PlaySound("sonicdoom/shadowerror", 4096)
	Goto Ready
  RingsFull:
    TNT1 A 0 A_Print("\c[ShadowRedBlack]I'm already at full Rings!")
	TNT1 A 0 A_PlaySound("sonicdoom/shadowerror", 4096)
	Goto Ready
  ChaosHeal:
    ECBL C 0 A_PlaySound("sonicdoom/healthcharge", 4096)
    ECBL C 0 A_TakeInventory("ChaosEnergy", 1)
    ECBL C 1 A_GiveInventory("Health", 16)
	Goto Ready
  Spawn:
    ECLI A -1
    Stop

  }
}

ACTOR DualShotguns : Weapon
{
  Weapon.SelectionOrder 1300
  Weapon.AmmoType1 "ChaosEnergy"
  Weapon.AmmoType2 "ChaosEnergy"
  Weapon.AmmoUse1 25
  Weapon.AmmoUse2 100
  Weapon.AmmoGive 50
  Weapon.KickBack 160
  Weapon.BobRangeX 0.0
  Weapon.BobRangeY 1.0
  Weapon.BobSpeed 2.0
  Inventory.PickupMessage "\c[ShadowRedBlack]Because one wasn't enough."
  Tag "Dual Shotguns"
  States
  {
  Ready:
    DSGN A 1 A_WeaponReady
    Loop
  Deselect:
    TNT1 AA 0 A_Lower
	DSGN A 1 A_Lower
	Goto Select+1
  Select:
    TNT1 AA 0 A_Lower
	DSGN A 1 A_Lower
	Goto Deselect+1
  Fire:
    DSGN A 0 A_PlaySound("sonicdoom/speedyshot")
	DSGN A 0 A_FireBullets(6, 4, 10, 4, "BulletPuff")
    DSGN BCDCBA 1
    DSGN A 0 A_PlaySound("sonicdoom/speedyshot")
	DSGN A 0 A_FireBullets(6, 4, 10, 4, "BulletPuff")
    DSGN EFGFEA 1
	Goto Ready
  AltFire:
    DSGN A 0 A_PlaySound("sonicdoom/speedyblast")
	DSGN A 0 A_ChangeVelocity (Cos(Pitch) * -10, 0, Sin(Pitch) * 10, CVF_Relative)
	DSGN A 0 A_FireBullets(12, 8, 60, 4)
    DSGN HIJKJIH 1
	DSGN A 9
    Goto Ready
  Spawn:
    DUSG A -1
    Stop
  }
}

ACTOR ShadowGrenades : Weapon
{
  Weapon.AmmoType "ChaosEnergy"
  Weapon.AmmoUse 100
  Weapon.AmmoGive 300
  Tag "Chaos Grenades"
  Inventory.PickupMessage "\c[ShadowRedBlack]These are just regular grenades painted green."
  +NOAUTOAIM
  States
  {
  Ready:
    SHGR A 1 A_WeaponReady
    Loop
  Deselect:
    SHGR AA 0 A_Lower
	Goto Select
  Select:
	SHGR A 1 A_Lower
	Goto Deselect
  Fire:
	SHGR BCDE 1
	TNT1 A 0 A_PlaySound("sonicdoom/chaosgrunt", 2)
    SHGR A 0 
	{
	  if (CountInv("PowerSuper")) {
        A_FireProjectile("ShadowGrenade", 0, 0, 0, 8);
	  }
	  else {
        A_FireProjectile("ShadowGrenade", 0, 1, 0, 8);
	  }
	}
	SHGR F 10
	SHGR GHIJ 1
    Goto Ready
  Spawn:
    CGRN A -1
    Stop
  }
}
