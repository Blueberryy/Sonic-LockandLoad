#include "actors/ammo.txt"
#include "actors/hints.txt"

ACTOR SonicPlayer : PlayerPawn
{
	Speed 2
	Health 125
	Radius 10
	Height 46
	PainChance 255
	Player.MaxHealth 999
	Player.DisplayName "Sonic the Hedgehog"
	Player.JumpZ 10.0
	Player.StartItem "Unarmed"
	Player.StartItem "ChaosEnergy", 30
	States
  {
  Spawn:
    PLAY A -1
    Loop
  See:
    PLAY ABCD 4 
    Loop
  Missile:
    PLAY E 12
    Goto Spawn
  Melee:
    PLAY F 6 BRIGHT
    Goto Missile
  Pain:
    PLAY G 4 
    PLAY G 4 A_Pain
    Goto Spawn
  Death:
    PLAY H 0 A_PlayerSkinCheck("AltSkinDeath")
  Death1:
    PLAY H 10
    PLAY I 10 A_PlayerScream
    PLAY J 10 A_NoBlocking
    PLAY KLM 10
    PLAY N -1
    Stop
  XDeath:
    PLAY O 0 A_PlayerSkinCheck("AltSkinXDeath")
  XDeath1:
    PLAY O 5
    PLAY P 5 A_XScream
    PLAY Q 5 A_NoBlocking
    PLAY RSTUV 5
    PLAY W -1
    Stop
  AltSkinDeath:
    PLAY H 6
    PLAY I 6 A_PlayerScream
    PLAY JK 6
    PLAY L 6 A_NoBlocking
    PLAY MNO 6
    PLAY P -1
    Stop
  AltSkinXDeath:
    PLAY Q 5 A_PlayerScream
    PLAY R 0 A_NoBlocking
    PLAY R 5 A_SkullPop
    PLAY STUVWX 5
    PLAY Y -1
    Stop
  }
}

ACTOR Unarmed : Weapon 1220
{
  Weapon.SelectionOrder 3700
  Weapon.Kickback 500
  Weapon.BobRangeX 0.0
  Weapon.BobRangeY 0.0
  Weapon.AmmoType "ChaosEnergy"
  +WEAPON.MELEEWEAPON
  States
  {
  Ready:
    TNT1 A 1 A_WeaponReady
    Loop
  Deselect:
    TNT1 AA 0 A_Lower
	Goto Select
  Select:
	TNT1 A 1 A_Lower
	Goto Deselect
  Fire:
    TNT1 A 0 A_JumpIf(CountInv("ChaosEnergy") < 15, "Dash")
    TNT1 A 0 A_JumpIf(CountInv("ChaosEnergy") > 14, "Boost")
  Boost:
    TNT1 A 0 A_PlaySound("sonicdoom/boost")
	TNT1 A 0 A_ZoomFactor(0.85, ZOOM_NOSCALETURNING)
	TNT1 A 0 A_TakeInventory("ChaosEnergy",15)
	TNT1 A 1 A_Recoil(-64)
	TNT1 A 0 A_Light(10)
	BOOS A 10 A_CustomPunch(200, CPF_PULLIN | CPF_NOTURN, 0, "BulletPuff", 100, 0.01)
	TNT1 A 0 A_Light(0)
	TNT1 A 0 A_ZoomFactor(1.0)
    Goto Ready
  Dash:
    TNT1 A 0 A_PlaySound("sonicdoom/dash")
	TNT1 A 0 A_ZoomFactor(0.9, ZOOM_NOSCALETURNING)
	TNT1 A 1 A_Recoil(-32)
	TNT1 A 10 A_CustomPunch(30, CPF_NOTURN, 0, "BulletPuff", 100)
	TNT1 A 0 A_ZoomFactor(1.0)
    Goto Ready
  AltFire:
    TNT1 A 0 A_PlaySound("sonicdoom/drift")
    TNT1 A 0 A_Recoil(-3)
	TNT1 A 0 A_Light(2)
    DRFT A 1 A_CustomPunch(1)
    Goto AfterDrift
  AfterDrift:
	TNT1 A 0 A_PlaySound("sonicdoom/aboost")
	TNT1 A 0 A_Light(0)
	Goto Ready
  }
}
ACTOR "Speedy Shotgun" : Weapon replaces Shotgun 1221
{
  Weapon.SelectionOrder 1300
  Weapon.AmmoType1 "ChaosEnergy"
  Weapon.AmmoType2 "ChaosEnergy"
  Weapon.AmmoUse1 2
  Weapon.AmmoUse2 8
  Weapon.AmmoGive 16
  Weapon.KickBack 160
  Weapon.BobRangeX 0.0
  Weapon.BobRangeY 1.0
  Weapon.BobSpeed 1.0
  Weapon.ReadySound "sonicdoom/spsgread"
  AttackSound "sonicdoom/speedyshot"
  Inventory.PickupMessage "Picked up the speedy shotgun!"
  States
  {
  Ready:
    SHTG A 1 A_WeaponReady
    Loop
  Deselect:
    TNT1 AA 0 A_Lower
	SHTG A 1 A_Lower
	Goto Select+1
  Select:
    TNT1 AA 0 A_Lower
	SHTG A 1 A_Lower
	Goto Deselect+1
  Fire:
    SHTG A 1
    SHTG A 1 A_FireBullets(3, 2, 10, 4)
    Goto Ready
  AltFire:
    SHTG A 2
	SHTG A 0 A_Recoil(16)
    SHTG AAAAA 3 A_FireBullets(12, 8, 40, 8)
	SHTG A 20 A_ReFire
	Goto Ready
  Flash:
    SHTF A 4 Bright A_Light1
    SHTF B 3 Bright A_Light2
    Goto LightDone
  Spawn:
    SHOT A -1
    Stop
  }
}
ACTOR "Chaos Blaster" : Weapon replaces Chaingun 1222
{
  Weapon.SelectionOrder 1400
  Weapon.AmmoType1 "ChaosEnergy"
  Weapon.AmmoType2 "ChaosEnergy"
  Weapon.AmmoUse 10
  Weapon.AmmoGive 25
  Weapon.KickBack 100
  Weapon.BobRangeX 0.0
  Weapon.BobRangeY 1.0
  Weapon.BobSpeed 1.0
  Inventory.PickupMessage "Picked up the Chaos energy blaster!"
  States
  {
  Ready:
    PLSG A 1 A_WeaponReady
    Loop
  Deselect:
    TNT1 AA 0 A_Lower
	PLSG A 1 A_Lower
	Goto Select+1
  Select:
    TNT1 AA 0 A_Lower
	PLSG A 1 A_Lower
	Goto Deselect+1
  Fire:
    PLSG A 1 A_FirePlasma
    Goto Ready
  Spawn:
    PLAS A -1
    Stop
  }
}
ACTOR "Rocket Stream" : Weapon replaces RocketLauncher 1223
{
  Weapon.SelectionOrder 1500
  Weapon.AmmoUse 40
  Weapon.AmmoGive 40
  Weapon.AmmoType "ChaosEnergy"
  Inventory.PickupMessage "Picked up the rocket stream launcher!"
  Weapon.BobRangeX 0.0
  Weapon.BobRangeY 1.0
  Weapon.BobSpeed 1.0
  States
  {
  Ready:
    MISG A 1 A_WeaponReady
    Loop
  Deselect:
    TNT1 AA 0 A_Lower
	MISG A 1 A_Lower
	Goto Select+1
  Select:
    TNT1 AA 0 A_Lower
	MISG A 1 A_Lower
	Goto Deselect+1
  Fire:
    MISG B 1 A_GunFlash
    MISG B 1 A_FireMissile
    MISG B 0 A_ReFire
    Goto Ready
  Flash:
    MISF A 3 Bright A_Light1
    MISF B 4 Bright
    MISF CD 4 Bright A_Light2
    Goto LightDone
  Spawn:
    LAUN A -1
    Stop
  }
}

ACTOR EnergyZombieman : Zombieman replaces Zombieman 
{
  DropItem ChaosCharge
}
ACTOR EnergyShotgunGuy : ShotgunGuy replaces ShotgunGuy 
{
  DropItem ChaosCharge
}
ACTOR EnergyImp : DoomImp replaces DoomImp 
{
  DropItem ChaosChargeX4
}
ACTOR EnergyChainGuy : ChaingunGuy replaces ChaingunGuy 
{
  DropItem ChaosChargeBox
}
ACTOR EnergyPinky : Demon replaces Demon 
{
  DropItem ChaosEnergyCapsule
}


ACTOR Ring : Health replaces HealthBonus 1000
{
  Inventory.PickupMessage "Picked up a ring."
  Inventory.PickupSound "sonicdoom/ring"
  Inventory.MaxAmount 999
  +COUNTITEM
  States
  {
  Spawn:
    RIN1 A -1
    Stop
  }
}
ACTOR 10Ring : CustomInventory replaces Stimpack 1001
{
  Inventory.PickupMessage "Picked up 10 rings."
  Inventory.PickupSound "sonicdoom/ring"
  Inventory.MaxAmount 999
  +COUNTITEM
  States
  {
  Spawn:
    RI10 A -1
    Stop
  Pickup:
    TNT1 A 0 A_GiveInventory ("Ring", 10)
  }
}
ACTOR 25Ring : CustomInventory replaces Medikit 1002
{
  Inventory.PickupMessage "Picked up 25 rings."
  Inventory.PickupSound "sonicdoom/ring"
  Inventory.Amount 25
  Inventory.MaxAmount 999
  +COUNTITEM
  States
  {
  Spawn:
    RI25 A -1
    Stop
  Pickup:
    TNT1 A 0 A_GiveInventory ("Ring", 25)
  }
}
ACTOR ChaosEmerald : CustomInventory replaces Soulsphere 1003
{
  Inventory.PickupMessage "You got a Chaos Emerald!!"
  Inventory.PickupSound "sonicdoom/chaosemerald"
  Inventory.Amount 250
  Inventory.MaxAmount 1750
  +COUNTITEM
  States
  {
  Spawn:
    CHSM A -1
    Stop
  Pickup:
	TNT1 A 0 A_GiveInventory ("Ring", 999)
	TNT1 A 0 A_GiveInventory ("InvulnerabilitySphere", 1)
	TNT1 A 0 A_GiveInventory ("ChaosEnergy", 9999)
	Stop
  }
}